---
layout:     post
title: 	    "Blog: IaaS Kapitel 4"
post_author:	    René Løhde
post_date:	    Sun, 08 Mar 2015 16:56:06 +0000
post_site:	    www.version2.dk 
post_link:	    http://www.version2.dk/blog/iaas-kapitel-4-94921?utm_medium=feed&utm_source=version2.dk&utm_campaign=it_nyheder
---
<html><body><div><section class="body"><p><strong>IaaS cloud omkostninger</strong></p>

<p>I <a href="http://www.version2.dk/blog/iaas-kapitel-3-76924">Kapitel 3</a> lave jeg en homogen udrulning af et public cloud, Proof-of-Concept IaaS projekt, henover 5 leverandører. Det sætter mig nu i den heldige situation at jeg får et helt unikt indblik i omkostningerne vedrørende IaaS i public cloud.</p>

<p>De generelle takseringsmekanismer er:</p>

<ul><li>Tiden den virtuelle server er provisioneret</li>
<li>Antallet af GB storage, som er tilknyttet den virtuelle server (der kan være prisforskelle afhængigt af storagetype og lokale spidsfindigheder, men det er ikke dramatisk)</li>
<li>Udgående GB trafik fra min server</li>
</ul><p>Der er pris-unikke elementer hos de enkelte leverandører. Man med fordel kan være opmærksom på nogle variationer f.eks:</p>

<ul><li>Moms eller anden skat - er det indeholdt i den kommunikerede pris?</li>
<li>Statisk offentlig IP adresse</li>
<li>Præinstalleret software licens (firewall, antivirus osv)</li>
<li>OS licens - Hvorfor skal jeg f.eks "aktiveres" på VMware - betyder det at jeg ikke er licensieret og hvorfor er Softlayer så dyr på Windows virtuelle maskiner i forhold til andre OS vm'er?</li>
<li>Man skal være opmærksom på den storage, som tilkyttes VM'erne. Der er forskelle på hvad man vælger og hvordan det afregnes</li>
<li>Udgående datatrafik er en forsvindende lille del af den samlede omkostning, men det er meget ugennemskueligt hvordan det afregnes. F.eks kan det betyde noget hvilken verdensdel du er hosted og med hvilken du kommunikere. Yderligere kan der være forskel på intern afregning - f.eks kan udgående trafik være gratis hvis det er til ydelser/datacenter, som er ejet af den samme leverandør</li>
<li>Der kan være store periodiske udsving på afregning i lokal valuta - Amazon og Microsoft tilbyder f.eks lokal afregning. Jeg syntes dog at deres kommunikation omkring dette, er lidt forvirrende</li>
<li>Nogle IaaS udbydere har en indbygget "skat", som jeg endnu ikke helt ved hvad går til f.eks skal jeg betale 6 EUR til VMware for "Online Support fee". Hvad jeg haft Rackspace med i denne øvelse skulle jeg betale omkring 50$ for service management</li>
</ul><p>Når det er sagt, så er det relativt nemt at finde de estimerede omkostninger for et projekt som mit. Det kan ske via de enkelte leverandørers "estimators". Det kan ske som en selvstændig "operation" eller det sker i forbindelse med bestilling af den virtuelle maskine.</p>

<p>Her er for eksempel VMwares estimat for min maskine:</p>

<p><figure class="plugin full"><img src="http://www.version2.dk/sites/v2/files/styles/article_620px_width/public/1-vmware-estimat.png?itok=zC_B9m0r" alt=""/></figure></p>

<p>Jeg vil gerne have mine estimater i omkostning per time - uafhængigt af hvordan de enkelt leverandøre afregner. Her er mine estimater, enten fundet via marketing eller via de enkelte leverandørers online kommunikerede estimater (de fleste udbydere har en <a href="http://azure.microsoft.com/da-dk/pricing/calculator/?scenario=virtual-machines">online "estimator"</a>):</p>

<p><figure class="plugin full zoomable"><img data-original-image="http://www.version2.dk/sites/v2/files/2-estimat-alle.png" src="http://www.version2.dk/sites/v2/files/styles/article_620px_width/public/2-estimat-alle.png?itok=eacMo31D" alt=""/></figure></p>

<p>Jeg har taget to priser med for Amazon Web Services EC2. Jeg har idriftsat min AWS instans applikation på en EC2 t2.small, men jeg kan forstå at denne instans, i modsætning til alle andre VM'er i øvelsen, ikke har en dedikeret vCPU tildelt. Derfor er har jeg taget AWS m3.medium med i skemaet, fordi den måske repræsenterer, en mere "fair" prissammenligning med f.eks Googles 'n1-stadrd-1' instans. NB Jeg havde afsluttet mit eksperiment, da jeg opdagede denne un-fair sammenligning.</p>

<p>Anyway, de forventede priser i tabellen er gode til en sammenligning, men langt mere interessant er de rent faktiske priser. Når man nu har kørt et POC, med 1 virtual maskine hos hver leverandør, så får man jo rent faktisk også en faktura fra alle 5 leverandører.</p>

<p>Her er mine udregnede timer, som de rent faktisk er blevet faktureret:</p>

<p><figure class="plugin full zoomable"><img data-original-image="http://www.version2.dk/sites/v2/files/3-faktiskbetalt.png" src="http://www.version2.dk/sites/v2/files/styles/article_620px_width/public/3-faktiskbetalt.png?itok=W4AP55D4" alt=""/></figure></p>

<p>I et søjle diagram tager sammenligningen sig sådan ud:</p>

<p><figure class="plugin full zoomable"><img data-original-image="http://www.version2.dk/sites/v2/files/4-sojlediagram.png" src="http://www.version2.dk/sites/v2/files/styles/article_620px_width/public/4-sojlediagram.png?itok=OCG6dg-Z" alt=""/></figure></p>

<p>Jeg har kigget efter andre kilder for at se efter de faktiske omkostninger - modsat de mange sammenligninger som findes på de "markedsførte priser" (se f.eks <a href="http://connect.cloudspectator.com/cloud-vendor-benchmark-2015-pdf-download">denne ganske fine fra Cloudspectator</a>), men indtil videre har jeg ikke fundet noget aktuelt. Derfor er denne øvelse, i alt beskedenhed, meget interessant.</p>

<p>Et par bemærkninger:</p>

<ul><li>SoftLayer - Det er usædvanligt omkostningstungt at kører Win2008 DataCenter Ed. OS hos Softlayer. Hvis jeg havde deployet på Linux var pris difference imellem Softlayer minimeret. Der er også forskel på om jeg kører datacenter edition eller standard Windows 2008 R2</li>
<li>VMware havde ikke DC edition, så derfor er det OS som er deployet her standard</li>
<li>AWS, Azure og GCE differentiere ikke nævneværdigt eller slet ikke på Windows OS versioner. Det er den samme pris om det er DC edition eller standard</li>
</ul><p>Alle leverandører går over min forventede pris og det har formentlig lidt at gøre med "udenom-omkostniger", som små beløb til trafik, IP, storage, transaktioner…osv. Google Compute Engine skiller sig ud ved ligge under den forventede pris. Grunden til at GCEs faktiske pris, ligger under min forventede pris, er deres discount model:</p>

<p><figure class="plugin full zoomable"><img data-original-image="http://www.version2.dk/sites/v2/files/5-google-priser.png" src="http://www.version2.dk/sites/v2/files/styles/article_620px_width/public/5-google-priser.png?itok=pwjZiZbf" alt=""/></figure></p>

<p>Jeg forventede at skulle betale "Full Price", men 200 timer af den måned, som serveren kørte, blev afregnet efter en anden takst. Google "belønner" for aktive CPU forbrug med en discount (jo mere du bruger, jo billigere CPU tid). Da min applikation er en letvægts webapplikationen kan jeg, i midlertidigt, ikke forklare hvorfor jeg har fået den discount, men jeg takker! Jeg lytter gerne til forslag fra erfarne GCE brugere.</p>

<p>Jeg ved ikke om det er en fejl hos GCE, men jeg har engang hørt en tidligere team-kollega fra Microsoft Azure, fortælle at Azure afregningen har fejl på 5-7%, af det gennemsnitlige antal udsendte fakturaer. Det kan være alt fra "slå-fejl", til udregning og discount fejl. Jeg er sikker på at de %-tal vil følge branchen lang tid fremover. Dels fordi flere ydelser kommer til og dels fordi udregningen bliver mere kompliceret - tag f.eks Googles discount model og Amazon <a href="http://aws.amazon.com/ec2/purchasing-options/spot-instances/">spot-pris model</a>. For at give en branche sammenligning, så har jeg hørt at i den finansielle sektor er der fejl i 3-4% i oversigter og rapporter.</p>

<p>Efter at have læst en hel del om prissætningen, vil jeg sidst men ikke mindst konstatere at alle leverandørerne tilbyder store rabatter, hvis man er villig til at købe sine IaaS ressourcer, ind på en månedlig eller årlig abonnements ordning.</p>
  </section></div></body></html>
